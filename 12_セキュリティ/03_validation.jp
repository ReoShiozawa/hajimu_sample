// はじむ言語：入力バリデーション

// メールアドレス検証
関数 メール検証(email):
    もし 長さ(email) == 0 なら
        戻す 偽
    終わり
    もし 正規一致(email, "^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$") なら
        戻す 真
    それ以外
        戻す 偽
    終わり
終わり

// パスワード強度
関数 パスワード検証(pw):
    変数 errors = []
    もし 長さ(pw) < 8 なら
        追加(errors, "8文字以上必要")
    終わり
    もし 正規一致(pw, "[A-Z]") == 偽 なら
        追加(errors, "大文字を含めてください")
    終わり
    もし 正規一致(pw, "[0-9]") == 偽 なら
        追加(errors, "数字を含めてください")
    終わり
    戻す errors
終わり

// 電話番号
関数 電話検証(tel):
    変数 cleaned = 置換(tel, "-", "")
    cleaned = 置換(cleaned, " ", "")
    もし 正規一致(cleaned, "^[0-9]{10,11}$") なら
        戻す 真
    それ以外
        戻す 偽
    終わり
終わり

// 数値範囲チェック
関数 範囲チェック(value, min_val, max_val):
    戻す value >= min_val かつ value <= max_val
終わり

// テスト
表示("=== メール検証 ===")
変数 emails = ["user@example.com", "invalid-email", "test@test.co.jp", "no_at_sign"]
各 e を emails の中:
    もし メール検証(e) なら
        表示("✅ " + e)
    それ以外
        表示("❌ " + e)
    終わり
終わり

表示("=== パスワード検証 ===")
変数 pws = ["pass", "Password1", "weakpass", "Secure123"]
各 p を pws の中:
    変数 errs = パスワード検証(p)
    もし 長さ(errs) == 0 なら
        表示("✅ " + p + ": OK")
    それ以外
        表示("❌ " + p + ": " + 結合(errs, ", "))
    終わり
終わり

表示("=== 電話番号検証 ===")
変数 tels = ["090-1234-5678", "03-1234-5678", "123", "09012345678"]
各 t を tels の中:
    もし 電話検証(t) なら
        表示("✅ " + t)
    それ以外
        表示("❌ " + t)
    終わり
終わり

表示("=== 数値範囲チェック ===")
表示("50 in [1,100]: " + 文字列化(範囲チェック(50, 1, 100)))
表示("150 in [1,100]: " + 文字列化(範囲チェック(150, 1, 100)))
